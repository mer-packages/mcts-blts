##
# VoIP / GTalk functional test cases
# 
# 01 FUTE-VoIP-Create_GTalk_call-MS
# 02 FUTE-VoIP-Answer_GTalk_call-MS
# 03 SMOKE-VoIP-GTalk_Call
# 04 FUTE-IM-Send_IM_using_GTalk-MS


# 01
[Test]
title FUTE-VoIP-Create_GTalk_call-MS

createx libmin-mwts-telepathy asset
asset Init
asset SetFailTimeout 300000

allocate phone host


remote host run scripter mwts-telepathy-gtalk-slave.cfg 2

asset CreateAccount account GTALK

asset CallToContact contact gtalk-slave
asset StayOnLine time 7000
asset EndCall

asset RemoveAccount

asset Close
delete asset

[Endtest]


# 02
[Test]
title FUTE-VoIP-Answer_GTalk_call-MS

createx libmin-mwts-telepathy asset
asset Init
asset SetFailTimeout 300000

allocate phone host


remote host run scripter mwts-telepathy-gtalk-slave.cfg 1

asset CreateAccount account GTALK

asset WaitForIncomingCall

asset AcceptCall
asset StayOnLine time 7000
asset EndCall

asset RemoveAccount

asset Close
delete asset

[Endtest]


# 03
[Test]
title SMOKE-VoIP-GTalk_Call

createx libmin-mwts-telepathy asset
asset Init
asset SetFailTimeout 300000

asset CreateAccount account GTALK

asset CallToContact contact gtalk-slave
asset StayOnLine time 7000
asset EndCall

asset RemoveAccount

asset Close
delete asset

[Endtest]


# 04
[Test]
title FUTE-IM-Send_IM_using_GTalk-MS

createx libmin-mwts-telepathy asset
asset Init
asset SetFailTimeout 300000

var slaveReady 0

allocate phone host

asset CreateAccount account GTALK

remote host run scripter mwts-telepathy-gtalk-slave.cfg 3

remote host request sendMessage

asset SendTextMessageTo number gtalk-slave

remote host release sendMessage

asset RemoveAccount
asset Close
delete asset
free host

[Endtest]


