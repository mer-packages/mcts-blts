
    MWTS-MULTIMEDIA
    ---------------


INTRODUCTION

mwts-qtmultimedia test package aimed for testing basic functionalities of Qt Mobility Multimedia. mwts-qtmultimedia contains tests for:
    Audio recorder. Tests are designed to address:
        - various codecs
        - various input device
        - various channels
        - various sample and bit rate
        - playing recorded audio, usable with audio player
    image viewer. Tests are designed to address:
        - various codecs
        - various resolutions
        - reliability
    fm radio. Tests are designed to address:
        - various frequencies
        - scanning fm band media player. Tests are designed to address:
        - various audio/video files
        - various playback volumes
        - stopping, pausing and seeking position of playback
        - playing recorded audio, usable with audio recorder

Test scenarios include:
    - recording audio
    - seeking forwards and backwards, to relative position
    - playing image file(s) from absolute directory/file path
    - recording audio and playing it back
    - playing audio file

The package is currently intended only for MeeGo, Maemo devices.
Questions: MWTSSupport@nokia.com See document MWTS.README for detailed general information about mwts test modules.
  
  
SOURCE CODE AND COMPILING

mwts-qtmultimedia compiles on a typical red hat/linux distributions by executing 'sh rpmbuild.sh' if you have missing dependencies,
add them with 'zypper install <package>', if you need to search after a package you can do that with 'zypper search <package>'
and get more info with 'zypper info <package>' mwts-qtmultimedia compiles on a typical debian/linux distributions by executing
'dpkg-buildpackage -rfakeroot', if you have missing dependencies add them with 'apt-get install <package>' on non-debian/red-hat
based linux system you can compile and install by (no dependency check) 'qmake', 'make', 'make install' (as root), if you have missing
sources you can track the package name with 'apt-file search <package>'.

Doxygen API documentation can be generated by running 'doxygen' in mwts-qtmultimedia root directory.
  

ENVIRONMENT REQUIREMENTS

For audio recorder test cases
    Setting up test environment is done normally. Also, it's good to use external microphone and headphones.
For image viewer
    Please note that test data (PNG, JPEG, BMP files) should be provided.
For fm radio test cases
    An antenna, i.e. headset must be connected to the device.
For audio player test cases
    Please note that test data (WAV, OGG files) should be provided.

DATA FILES

The data files for the test cases are available here: http://testdata.meego.com

EXECUTING TESTS

Tests are executed as "user", not "root". Check the MWTS.README for general instructions. Start 'min' in the shell of the device.
Select a case, observe if audio is recorded and played back or image is shown, fm radio played correctly and check the test result from min and the log files.

TEST RESULTS

Test results can be found from device in directory /var/log/tests/ Result files are named according to test cases, .result file contains overall
information about test run and measured values.


MIN SCRIPT FILES

Basic functionality test cases, nft

mwts-qtmultimedia-audiorecorder.cfg

mwts-qtmultimedia-imageviewer.cfg
mwts-qtmultimedia-imageviewer-nft.cfg

mwts-qtmultimedia-fmradio.cfg

MIN SCRIPTER INTERFACE

  #multimedia test
  EnableFeature <audio_recorder | media_player | image_viewer | radio_player>
    Allocate needed abject and initialize it.

  #audio recorder
  ShowSupportedCodecsAndContainers
    Shows supported codecs and containners on device. They are wrote to .resuls file.
  SetRecordingDuration <milliseconds>
     Sets the duration of the recording
  SetContainer <container>
     Sets container for audio output. Use it if you don't want to use default container.
  SetCodec <codec>
     Sets the used audio codec name
  SetDevice <device>
     Sets the used input device of the recording
  SetQuality <quality>
     Sets the recording quality: very_high, high, normal, low, very_low
  SetPath <directory path>
     Sets the directory path of the recording output file
  SetChannelCount <count>
     Sets the channel count. Mono:1, Stereo:2
  SetBitRate <bitrate>
     Sets the value of bitrate in bit/sec.
  SetSampleRate <frequency>
     Sets the vale of sample rate (frequency) in Hertz
  Record
     Records audio according to the duration (SetDuration <duration>)  then stops and saves

  #image viewer
  SetImageTimeout <milliseconds>
    Set the timeout, one image is showed for <milliseconds> time
  SetImageViewerPath [ <directory path> | <file path> | no parameter = default from MultimediaTest.conf ]
    Loads image(s) into image viewer playlist
  PlayImageViewer
    Plays set image file(s)

  #fm radio
  SetFrequency <frequency>
    Sets the frequency in Hertz
  ScanUp
    Starts a foreward scan for a signal, starting from the current frequency
  ScanDown
    Starts a backward scan for a signal, starting from the current frequency
  SetVolume <volume>
    Set the radio volume in percentage
  PlayRadio
    Starts to play the radio on the set frequency for a certain time

  #media player
  SetMedia <media path>
    Sets path to audio media file to play
  SetPlaybackVolume <volume>
    Sets volume of audio media player. Value between  0 and 100.
  SetPlaybackDuration <duration>
    Set the audio player playback duration in miliseconds. Has to be > 0. Recommended value is 2000 ms.
  Play
    Play set audio media file. It plays only first  4 sec of file.
  PlayRecordedAudio
    Plays back recently recorder audio. Use after Record function.
  SetStopTimeout <time>
    Sets timeout for stop playback event in secons
  SetPauseTimeout <time>
    Sets timeout for pause playback event in secons
  SetPauseDuration <duration>
    Sets duration of pause after receiving pause signal in secons
  SetSeekTimeout <time>
    Sets timeout for seek playback position event in secons
  SetSeekPosition <position>
    Sets position to seek after receiving seek signal in secons
  SetStopEventBehaviour <stop_normal | stop_and_play>
    Sets behaviour after receiving stop signal
  InitVideo
    Initializes video output for video media files

TRACING

Log file can be found in /var/log/tests if the environment variable MWTS_DEBUG has been set to 1.
    Command: export MWTS_DEBUG=1


KNOWN ISSUES

 At the audio an recorder external microphone is recommended to use on netbook.
 The fm radio is not supported on MeeGo with Qt Mobility Multimedia, but on Fremantle.
 Currently the image viewer does not play GIF and AnimGiF types.
 Media player. For some media file types media qt multimedia cause audio to mute.
 Video test cases after stopping and playing / pausing and resuming do not change
 position of file.

OTHER RESOURCES

The config/MultimediaTest.conf contains several DEFAULT settings to the audio recorder.
Setting default codec and container from conf file is currently not available.

    #default audio recorder settings
    [RECORDER]
    ...
    duration=4000
    #codec=audio/vorbis
    device=alsa:front:CARD=Intel,DEV=0
    ....
    filename=recorded_audio????
    ...
    ...

The RECORDER has only one value which cannot be set from the script. The has the value ' which generates incremental filename, which helps to avoid overwriting each file. In this case the recorded audio filename will be recorded_audio0000, after second round recorded_audio0001, then recorded_audio0002..There are 2 limitations on the usage of the question marks: the highest possible substituted value must fit in an "int" and there must be at most one sequence of question marks.
In the image viewer if no parameter is given to the PlayImageViewer function, it implicitly takes the directory/file value from here.
    ...
    #default image viewer settings
    [VIEWER]
    path=/home/user/MyDocs/testdata/Image/JPEG
    ...
    ...

The fm radio has very basic settings .

    ...
    #default fm radio settings
    [FMRADIO]
    frequency=89900
    duration=3000
    volume=70

The audio player settings. So far only volume can be set in this conf file.

    #default media player settings
    [PLAYER]
    volume=70

The codecs and container settings. In those settings names of codecs and containers, and file extension for them, and default container for codecs can be found.

    #codecs names
    [CODEC]
    vorbis=audio/vorbis
    pcm=audio/PCM

    #codec files extensions
    [CODEC_EXT]
    vorbis=ogg
    pcm=wav

    #containers names
    [CONTAINER]
    wav=wav
    ogg=ogg

    #containers extension
    [CONTAINER_EXT]
    wav=wav
    ogg=ogg

    #default containers for codecs codec=container
    [DEFAULT_CONTAINER]
    vorbis=ogg
    pcm=wav
